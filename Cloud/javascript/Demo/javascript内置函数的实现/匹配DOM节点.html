<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>匹配DOM节点</title>
    <style media="screen">
      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      #container {
        width: 400px;
        height: 400px;
        border-radius: 200px;
        background-color: rgb(61, 105, 224);
        margin: 200px auto 0;
        box-shadow: 0 0 5px black;
      }
      .color {
        width: 100px;
        height: 100px;
        border-radius: 50px;
        background-color: rgb(38, 128, 103);
        float: left;
        box-shadow: 0 0 5px black;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <ul>
        <li class="color"></li>
        <li class="color"></li>
        <li class="color"></li>
        <li class="color"></li>
      </ul>
      <div></div>
    </div>

    <script type="text/javascript">
      function match(selector) {
        // 获得所有元素
        var all = document.getElementsByTagName("*");
        // 获得首字符
        var first = selector.charAt(0);
        // 获得剩余字符串
        var after = selector.substr(1);

        switch (first) {
          case '#':
            for (var i = 0; i < all.length; i++) {
              if (all[i].id == after) {
                return all[i];
              }
            }
          case '.':
            var tags = [];
            for (var i = 0; i < all.length; i++) {
              if (all[i].className == after) {
                tags.push(all[i]);
              }
            }
          return tags;

          default:
          var tags = [];
          for (var i = 0; i < all.length; i++) {
            if (all[i].tagName.toLowerCase() == selector) {
              tags.push(all[i]);
            }
          }
          return tags;
        }
      }
      console.log(match(".color"));
    </script>
  </body>
</html>
